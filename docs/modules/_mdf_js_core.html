<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@mdf.js/core | @mdf.js</title><meta name="description" content="Documentation for @mdf.js"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@mdf.js</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@mdf.js</a></li><li><a href="_mdf_js_core.html">@mdf.js/core</a></li></ul><h1>Module @mdf.js/core</h1></div><section class="tsd-panel tsd-typography"><a id="md:mdfjscore" class="tsd-anchor"></a><h1 class="tsd-anchor-link"><strong>@mdf.js/core</strong><a href="#md:mdfjscore" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://nodejs.org/en/" target="_blank" class="external"><img src="https://img.shields.io/static/v1?style=flat&amp;logo=node.js&amp;logoColor=green&amp;label=node&amp;message=%3E=20&amp;color=blue" alt="Node Version"></a>
<a href="https://www.typescriptlang.org/" target="_blank" class="external"><img src="https://img.shields.io/static/v1?style=flat&amp;logo=typescript&amp;label=Typescript&amp;message=5.4&amp;color=blue" alt="Typescript Version"></a>
<a href="https://snyk.io/package/npm/snyk" target="_blank" class="external"><img src="https://img.shields.io/static/v1?style=flat&amp;logo=snyk&amp;label=Vulnerabilities&amp;message=0&amp;color=300A98F" alt="Known Vulnerabilities"></a>
<a href="https://mytracontrol.github.io/mdf.js/" target="_blank" class="external"><img src="https://img.shields.io/static/v1?style=flat&amp;logo=markdown&amp;label=Documentation&amp;message=API&amp;color=blue" alt="Documentation"></a></p>
<!-- markdownlint-disable MD033 MD041 -->
<p align="center">
  <div style="text-align:center;background-image:radial-gradient(circle farthest-corner at 50% 50%, #104c60, #0c0c13);">
    <img src="https://assets.website-files.com/626a3ef32d23835d9b2e4532/6290ab1e2d3e0d922913a6e3_digitalizacion_ENG.svg"alt="netin"width="500">
  </div>
</p>
<h1 style="text-align:center;margin-bottom:0">Mytra Development Framework - @mdf.js/core</h1>
<h5 style="text-align:center;margin-top:0">Core module with shared components for resource management and instrumentation API</h5>
<!-- markdownlint-enable MD033 -->
<hr>
<a id="md:table-of-contents" class="tsd-anchor"></a><h2 class="tsd-anchor-link"><strong>Table of contents</strong><a href="#md:table-of-contents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="#md:mdfjscore"><strong>@mdf.js/core</strong></a>
<ul>
<li><a href="#md:table-of-contents"><strong>Table of contents</strong></a></li>
<li><a href="#md:introduction"><strong>Introduction</strong></a></li>
<li><a href="#md:installation"><strong>Installation</strong></a></li>
<li><a href="#md:health-interface"><strong><em><code>Health</code></em> Interface</strong></a></li>
<li><a href="#md:layerapp-interface"><strong><em><code>Layer.App</code></em> Interface</strong></a></li>
<li><a href="#md:layerprovider-api"><strong><em><code>Layer.Provider</code></em> API</strong></a>
<ul>
<li><a href="#md:i-want-to-use-an-already-instrumented-provider">I Want to Use an Already Instrumented <code>Provider</code></a></li>
<li><a href="#md:i-want-to-instrument-a-provider-with-this-api">I want to instrument a <code>Provider</code> with this API</a>
<ul>
<li><a href="#md:1-extendiendo-la-clase-port"><strong>1. Extendiendo la clase <code>Port</code></strong></a></li>
<li><a href="#md:2-defining-the-portconfigvalidationstruct-object"><strong>2. Defining the <code>PortConfigValidationStruct</code> object</strong></a></li>
<li><a href="#md:3-using-the-providerfactorycreator-function"><strong>3. Using the <code>ProviderFactoryCreator</code> function</strong></a></li>
<li><a href="#md:small-and-simple-example"><strong>Small and simple example</strong></a>
<ul>
<li><a href="#md:portts"><em>port.ts</em></a></li>
<li><a href="#md:configts"><em>config.ts</em></a></li>
<li><a href="#md:factoryts"><em>factory.ts</em></a></li>
<li><a href="#md:indexts"><em>index.ts</em></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#md:jobs-api"><strong><em><code>Jobs</code></em> API</strong></a>
<ul>
<li><a href="#md:customization-of-generic-types">Customization of Generic Types</a></li>
<li><a href="#md:jobhandler-class"><strong><em><code>JobHandler</code></em> Class</strong></a></li>
</ul>
</li>
<li><a href="#md:license"><strong>License</strong></a></li>
</ul>
</li>
</ul>
<a id="md:introduction" class="tsd-anchor"></a><h2 class="tsd-anchor-link"><strong>Introduction</strong><a href="#md:introduction" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <strong>@mdf.js/core</strong> module is a set of types, interfaces, and classes that standardize the way in which the state of the resources managed by the applications developed with <strong>@mdf.js</strong> is reported. This module is part of the <strong>@mdf.js</strong> ecosystem, which aims to provide a set of tools and libraries that facilitate the development of applications in Node.js, especially those that require a high level of observability and monitoring.</p>
<p>The <strong>@mdf.js/core</strong> module is composed of the following elements:</p>
<ul>
<li>The <code>Health</code> interface, which is a set of types and interfaces that standardize the way in which the state of the resources is reported.</li>
<li>The <code>Layer</code> namespace, which contains the following elements:
<ul>
<li>The <code>App</code> interface, which is a set of types and interfaces that standardize the components of an application from the observability point of view.</li>
<li>The <code>Provider</code> API, which allows for the instrumentation of resource providers (databases, publish/subscribe services, etc.) so they can be managed in a standardized way within the <strong>@mdf.js</strong> API, especially in terms of observability, configuration management, and resource provider state management.</li>
</ul>
</li>
<li>The <code>Jobs</code> API, which allows for the creation and management of jobs in a standardized way within the <strong>@mdf.js</strong> API.</li>
</ul>
<a id="md:installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link"><strong>Installation</strong><a href="#md:installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To install the <strong>@mdf.js/core</strong> module, you can use the following commands:</p>
<ul>
<li><strong>npm</strong></li>
</ul>
<pre><code class="shell"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@mdf.js/core</span>
</code><button type="button">Copy</button></pre>

<ul>
<li><strong>yarn</strong></li>
</ul>
<pre><code class="shell"><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">@mdf.js/core</span>
</code><button type="button">Copy</button></pre>

<a id="md:health-interface" class="tsd-anchor"></a><h2 class="tsd-anchor-link"><strong><em><code>Health</code></em> Interface</strong><a href="#md:health-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>Health</code> interface is a set of types and interfaces that standardize the way in which the state of the resources managed by the <code>Provider</code> is reported. The <code>Health</code> interface is composed of the following types and interfaces:</p>
<ul>
<li>
<p><code>Status</code>: a type that represents the status of a resource, which can be one of the following values:</p>
<ul>
<li><code>pass</code>: indicates that the resource is in a normal operating state.</li>
<li><code>fail</code>: indicates that the resource is in an error state.</li>
<li><code>warn</code>: indicates that the resource is in a warning state.</li>
</ul>
</li>
<li>
<p><code>Check&lt;T&gt;</code>: an interface that defines the structure of a check object, with the following properties:</p>
<ul>
<li><code>componentId</code>: a unique identifier for an instance of a specific sub-component/dependency of a service in <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier" target="_blank" class="external">UUID v4</a> format. Multiple objects with the same <code>componentId</code> may appear in the details if they are from different nodes.</li>
<li><code>componentType</code>: an optional string that SHOULD be present if <code>componentName</code> is present. It indicates the type of the component, which could be a pre-defined value from the spec (such as <code>component</code>, <code>datastore</code>, or <code>system</code>), a common and standard term from a well-known source (like <a href="http://schema.org" target="_blank" class="external">schema.org</a>, IANA, or microformats), or a URI indicating extra semantics and processing rules.</li>
<li><code>observedValue</code>: an optional property that could be any valid JSON value (such as a string, number, object, array, or literal). The type is referenced by <code>T</code> in the interface definition.</li>
<li><code>observedUnit</code>: an optional string that SHOULD be present if <code>metricValue</code> is present. It could be a common and standard term from a well-known source or a URI indicating extra semantics and processing rules.</li>
<li><code>status</code>: a value of type <code>Status</code> indicating whether the service status is acceptable or not.</li>
<li><code>affectedEndpoints</code>: an optional array of strings containing URI Templates as defined by [RFC6570], indicating which particular endpoints are affected by the check.</li>
<li><code>time</code>: an optional string indicating the date-time, in ISO8601 format, at which the reading of the <code>metricValue</code> was recorded.</li>
<li><code>output</code>: an optional property containing raw error output in case of “fail” or “warn” states. This field SHOULD be omitted for “pass” state.</li>
<li><code>links</code>: an optional object containing link relations and URIs [RFC3986] for external links that may contain more information about the health of the endpoint. This includes potentially a “self” link, which may be used by clients to check health via HTTP response code.</li>
<li>... and any other property that the <code>Provider</code> developer considers necessary to provide more information about the check.</li>
</ul>
</li>
<li>
<p><code>Checks</code>: The &quot;checks&quot; object within the health check model allows for the representation of the health status of various logical sub-components of a service. This flexible structure is designed to accommodate the complexities of modern distributed systems, where each component may consist of multiple nodes, each potentially exhibiting a different health status. Here's a breakdown of how the &quot;checks&quot; object is structured and the semantics of its keys and values:</p>
<ul>
<li>Each key in the &quot;checks&quot; object represents a logical sub-component of the service. The uniqueness of each key ensures that the health status of each sub-component can be individually assessed and reported.</li>
<li>The value associated with each key is an array of <code>Check</code> objects. This array accommodates scenarios where a single logical sub-component is supported by multiple nodes. For single-node sub-components, or when the distinction between nodes is not relevant, a single-element array is used for consistency.</li>
<li>The key for each sub-component is a unique string within the &quot;details&quot; section of the health check model. It may consist of two parts, separated by a colon (<code>:</code>): <code>{componentName}:{metricName}</code>. The structure of these keys is as follows:
<ul>
<li><code>componentName</code>: This part of the key provides a human-readable identifier for the component. It must not contain a colon, as the colon serves as the delimiter between the component name and the metric name.</li>
<li><code>metricName</code>: This part specifies the particular metric for which the health status is reported. Like the component name, it must not contain a colon. The metric name can be a pre-defined value specified by the health check model (such as &quot;utilization,&quot; &quot;responseTime,&quot; &quot;connections,&quot; or &quot;uptime&quot;), a common term from a recognized standard or organization (like <a href="http://schema.org" target="_blank" class="external">schema.org</a>, IANA, or microformats), or a URI that conveys additional semantics and processing rules associated with the metric.</li>
</ul>
</li>
</ul>
<p>The <code>Checks</code> type is defined to capture this structure, where each entry in the object maps to an array of <code>Check</code> objects, allowing for a detailed and nuanced representation of the health status across different parts of a service and its underlying infrastructure.</p>
<pre><code class="typescript"><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-5">Checks</span><span class="hl-1">&lt;</span><span class="hl-5">T</span><span class="hl-1"> = </span><span class="hl-5">any</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  [</span><span class="hl-5">entry</span><span class="hl-1"> </span><span class="hl-4">in</span><span class="hl-1"> </span><span class="hl-5">CheckEntry</span><span class="hl-1">]: </span><span class="hl-5">Check</span><span class="hl-1">&lt;</span><span class="hl-5">T</span><span class="hl-1">&gt;[];</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

</li>
</ul>
<p>And finally, the <code>Health</code> export an auxiliary method <code>overallStatus</code> that determine the <code>Status</code> of the component based on the <code>Checks</code> object.</p>
<pre><code class="typescript"><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-0">overallStatus</span><span class="hl-1">(</span><span class="hl-6">checks</span><span class="hl-1">: </span><span class="hl-5">Checks</span><span class="hl-1">): </span><span class="hl-5">Status</span><span class="hl-1"> </span>
</code><button type="button">Copy</button></pre>

<a id="md:layerapp-interface" class="tsd-anchor"></a><h2 class="tsd-anchor-link"><strong><em><code>Layer.App</code></em> Interface</strong><a href="#md:layerapp-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>App</code> interface is a set of types and interfaces that standardize the way in which the state of the application is reported. The <code>App</code> API define 3 different types of components from the observability point of view:</p>
<ul>
<li>
<p><code>Component</code>: a component is any part of the system that has a own identity and can be monitored for error handling. The only requirement is to emit an error event when something goes wrong, to have a name and unique component identifier.</p>
<pre><code class="typescript"><span class="hl-7">/** Component */</span><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-5">Component</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">EventEmitter</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">/** Emitted when the component throw an error*/</span><br/><span class="hl-1">  </span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-6">event</span><span class="hl-1">: </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1">, </span><span class="hl-0">listener</span><span class="hl-1">: (</span><span class="hl-6">error</span><span class="hl-1">: </span><span class="hl-5">Crash</span><span class="hl-1"> | </span><span class="hl-5">Error</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-5">void</span><span class="hl-1">): </span><span class="hl-5">this</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Component name */</span><br/><span class="hl-1">  </span><span class="hl-6">name</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Component identifier */</span><br/><span class="hl-1">  </span><span class="hl-6">componentId</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>This interface define:</p>
<ul>
<li><strong>Properties</strong>:
<ul>
<li><code>name</code>: the name of the component, this name is used by the observability layers to identify the component.</li>
<li><code>componentId</code>: a unique identifier for the instance in <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier" target="_blank" class="external">UUID v4</a> format.</li>
</ul>
</li>
<li><strong>Events</strong>:
<ul>
<li><code>on('error', listener: (error: Crash | Error) =&gt; void): this</code>: event emitted every time the <code>Component</code> emits an error.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>Resource</code>: a resource is extended component that represent the access to an external/internal resource, besides the error handling and identity, it has a start, stop and close methods to manage the resource lifecycle. It also has a checks property to define the checks that will be performed over the resource to achieve the resulted status. The most typical example of a resource are the <code>Provider</code> that allow to access to external databases, message brokers, etc.</p>
<pre><code class="typescript"><span class="hl-7">/** Resource */</span><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-5">Resource</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">Component</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">/** Emitted when the component throw an error*/</span><br/><span class="hl-1">  </span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-6">event</span><span class="hl-1">: </span><span class="hl-2">&#39;error&#39;</span><span class="hl-1">, </span><span class="hl-0">listener</span><span class="hl-1">: (</span><span class="hl-6">error</span><span class="hl-1">: </span><span class="hl-5">Crash</span><span class="hl-1"> | </span><span class="hl-5">Error</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-5">void</span><span class="hl-1">): </span><span class="hl-5">this</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Emitted on every status change */</span><br/><span class="hl-1">  </span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-6">event</span><span class="hl-1">: </span><span class="hl-2">&#39;status&#39;</span><span class="hl-1">, </span><span class="hl-0">listener</span><span class="hl-1">: (</span><span class="hl-6">status</span><span class="hl-1">: </span><span class="hl-5">Status</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-5">void</span><span class="hl-1">): </span><span class="hl-5">this</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Checks performed over this component to achieve the resulted status */</span><br/><span class="hl-1">  </span><span class="hl-6">checks</span><span class="hl-1">: </span><span class="hl-5">Checks</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Resource status */</span><br/><span class="hl-1">  </span><span class="hl-6">status</span><span class="hl-1">: </span><span class="hl-5">Status</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Resource start function */</span><br/><span class="hl-1">  </span><span class="hl-0">start</span><span class="hl-1">: () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-5">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">void</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Resource stop function */</span><br/><span class="hl-1">  </span><span class="hl-0">stop</span><span class="hl-1">: () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-5">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">void</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Resource close function */</span><br/><span class="hl-1">  </span><span class="hl-0">close</span><span class="hl-1">: () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-5">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">void</span><span class="hl-1">&gt;;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Besides the <code>Component</code> properties and events, this interface define:</p>
<ul>
<li><strong>Properties</strong>:
<ul>
<li><code>checks</code>: list of checks performed by the component to determine its state. It is a list of objects of type <code>Health.Checks</code>.</li>
<li><code>status</code>: the current status of the <code>Resource</code>. It is a variable of type <code>Health.Status</code> whose value can be:
<ul>
<li><code>pass</code>: indicates that the <code>Resource</code> is in a normal operating state. If all the checks are in <code>pass</code> state, the <code>Resource</code> will be in <code>pass</code> state.</li>
<li><code>fail</code>: indicates that the <code>Resource</code> is in an error state. If any of the checks are in <code>fail</code> state, the <code>Resource</code> will be in <code>fail</code> state.</li>
<li><code>warn</code>: indicates that the <code>Resource</code> is in a warning state. If any of the checks are in <code>warn</code> state, the <code>Resource</code> will be in <code>warn</code> state.</li>
</ul>
</li>
</ul>
</li>
<li><strong>Methods</strong>:
<ul>
<li><code>start(): Promise&lt;void&gt;</code>: initialize the <code>Resource</code>, internal jobs, external dependencies connections ....</li>
<li><code>stop(): Promise&lt;void&gt;</code>: stops the <code>Resource</code>, close connections, stop internal jobs, etc.</li>
<li><code>close(): Promise&lt;void&gt;</code>: closes the <code>Resource</code>, release resources, destroy connections, etc.</li>
</ul>
</li>
<li><strong>Events</strong>:
<ul>
<li><code>on('status', listener: (status: Health.Status) =&gt; void): this</code>: event emitted every time the <code>Resource</code> changes its state.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>Service</code>: a service is a special kind of resource that besides <code>Resource</code> properties, it could offer:</p>
<ul>
<li>Its own REST API endpoints, using an express router, to expose details about service.</li>
<li>A links property to define the endpoints that the service expose.</li>
<li>A metrics property to expose the metrics registry where the service will register its own metrics. This registry should be a <a href="https://www.npmjs.com/package/prom-client" target="_blank" class="external">prom-client</a> registry.</li>
</ul>
<pre><code class="typescript"><span class="hl-7">/** Service */</span><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-5">Service</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">Resource</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">/** Express router */</span><br/><span class="hl-1">  </span><span class="hl-6">router</span><span class="hl-1">?: </span><span class="hl-5">Router</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Service base path */</span><br/><span class="hl-1">  </span><span class="hl-6">links</span><span class="hl-1">?: </span><span class="hl-5">Links</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Metrics registry */</span><br/><span class="hl-1">  </span><span class="hl-6">metrics</span><span class="hl-1">?: </span><span class="hl-5">Registry</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Besides the <code>Resource</code> properties, methods and events, this interface define:</p>
<ul>
<li><strong>Properties</strong>:
<ul>
<li><code>router</code>: an express router that will be used to expose the service endpoints.</li>
<li><code>links</code>: an object containing link relations and URIs [RFC3986] for external links that may contain more information about the health of the endpoint. This includes potentially a “self” link, which may be used by clients to check health via HTTP response code.</li>
<li><code>metrics</code>: a metrics registry that will be used to register the service metrics. This registry should be a <a href="https://www.npmjs.com/package/prom-client" target="_blank" class="external">prom-client</a> registry.</li>
</ul>
</li>
</ul>
</li>
</ul>
<a id="md:layerprovider-api" class="tsd-anchor"></a><h2 class="tsd-anchor-link"><strong><em><code>Layer.Provider</code></em> API</strong><a href="#md:layerprovider-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>Provider</code> API of <strong>@mdf.js</strong> allows for the instrumentation of resource providers (databases, publish/subscribe services, etc.) so they can be managed in a standardized way within the <strong>@mdf.js</strong> API, especially in terms of:</p>
<ul>
<li>Observability, as all <em><strong>Providers</strong></em> implement the <a href="https://www.npmjs.com/package/@mdf.js/observability" target="_blank" class="external"><code>Layer.App.Resource</code></a> interface.</li>
<li>Configuration management, providing an interface for managing default, specific, or environment variable-based configurations.</li>
<li>Resource provider state management, through the standardization of the states and operation modes of the <em><strong>Providers</strong></em>.</li>
</ul>
<p>Some examples of providers instrumented with this API are:</p>
<ul>
<li><a href="https://www.npmjs.com/package/@mdf.js/mongo-provider" target="_blank" class="external"><strong>@mdf.js/mongodb-provider</strong></a></li>
<li><a href="https://www.npmjs.com/package/@mdf.js/redis-provider" target="_blank" class="external"><strong>@mdf.js/redis-provider</strong></a></li>
<li><a href="https://www.npmjs.com/package/@mdf.js/elastic-provider" target="_blank" class="external"><strong>@mdf.js/elastic-provider</strong></a></li>
</ul>
<a id="md:i-want-to-use-an-already-instrumented-provider" class="tsd-anchor"></a><h3 class="tsd-anchor-link">I Want to Use an Already Instrumented <code>Provider</code><a href="#md:i-want-to-use-an-already-instrumented-provider" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>A provider that has been correctly instrumented with <strong>@mdf.js/core</strong> API always offers a <code>Factory</code> class with a single static method <code>create</code> that allows creating new instances of the provider with the desired configuration for each case.</p>
<p>This <code>create</code> method <strong>may</strong> receive a configuration object with the following optional properties:</p>
<ul>
<li><code>name</code>: the name of the provider that will be used for observability, if not specified, the default provider name will be used.</li>
<li><code>logger</code>: a <code>LoggerInstance</code> object, belonging to the <strong>@mdf.js/logger</strong> module or any other object that implements the <code>LoggerInstance</code> interface. If specified, it will be used by both the <code>Provider</code> and the <code>Port</code> it wraps. If not specified, a <a href="https://www.npmjs.com/package/debug" target="_blank" class="external">DEBUG</a> type logger will be used with the provider's name indicated in the <code>name</code> property, or if not specified, with the default provider name.</li>
<li><code>config</code>: specific configuration object for the module wrapped by the <code>Provider</code> in question. If not specified, the default configuration set by the <code>Provider</code> developer will be used.</li>
<li><code>useEnvironment</code>: this property can be a boolean or a string, with its default value being <code>false</code>. It can take the following values:
<ul>
<li><code>boolean</code>:
<ul>
<li><code>true</code>: indicates that the environment variables defined by the <code>Provider</code> developer should be used, combined with the <code>Provider</code>'s default values and the configuration passed as an argument. The configuration is established in this order of priority: first, the arguments provided directly are taken into account, then the configurations defined in the system's environment variables, and lastly, if none of the above is available, the default values are applied.</li>
<li><code>false</code>: indicates that the environment variables defined by the <code>Provider</code> developer should NOT be used, only the default values will be combined with the configuration passed as an argument. In this case, the configuration is established in this order of priority: first, the arguments provided directly are taken into account, and then the default values.</li>
</ul>
</li>
<li><code>string</code>: if a string is passed, it will be used as a prefix for the environment configuration variables, represented in <a href="https://en.wikipedia.org/wiki/Snake_case" target="_blank" class="external"><code>SCREAMING_SNAKE_CASE</code></a>, which will be transformed to <code>camelCase</code> and combined with the rest of the configuration, except with the environment variables defined by the <code>Provider</code> developer. In this case, the configuration is established in this order of priority: first, the arguments provided directly are taken into account, then the configurations defined in the system's environment variables, and lastly, if none of the above is available, the default values are applied.</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>Note</strong>: The aim of this configuration handling is to allow the user to work in two different modes:</p>
<ul>
<li><em>User rules</em>: the user sets their own configuration, disregarding the environment variables indicated by the <code>Provider</code> developer, with the alternative of being able to use a fast track of environment variables usage through a prefix. That is: <code>useEnvironment: false</code> or <code>useEnvironment: 'MY_PREFIX_'</code>.</li>
<li><em>Provider rules</em>: the user prefers to use the environment variables defined by the <code>Provider</code> developer, in which case the management of the environment variables should be delegated to the <code>Provider</code>, allowing the user to set specific configuration values through the input argument, an attempt to create a <strong>mixed</strong> configuration where both the <code>Provider</code> and the service/application try to use environment variables, can lead to undesirable situations. That is: <code>useEnvironment: true</code>.</li>
</ul>
</blockquote>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">Mongo</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@mdf.js/mongo-provider&#39;</span><span class="hl-1">;</span><br/><span class="hl-7">// Using only `Provider` default values:</span><br/><span class="hl-7">// - [x] `Provider` default values</span><br/><span class="hl-7">// - [] `Provider` environment variables</span><br/><span class="hl-7">// - [] User custom values</span><br/><span class="hl-7">// - [] Parsing of environment variables</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">myProvider</span><span class="hl-1"> = </span><span class="hl-6">Mongo</span><span class="hl-1">.</span><span class="hl-6">Factory</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">();</span><br/><span class="hl-7">// Using `Provider` default values and custom values:</span><br/><span class="hl-7">// - [x] `Provider` default values</span><br/><span class="hl-7">// - [] `Provider` environment variables</span><br/><span class="hl-7">// - [x] User custom values</span><br/><span class="hl-7">// - [] Parsing of environment variables</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">myProvider</span><span class="hl-1"> = </span><span class="hl-6">Mongo</span><span class="hl-1">.</span><span class="hl-6">Factory</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-6">config:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;mongodb://localhost:27017&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">appName:</span><span class="hl-1"> </span><span class="hl-2">&#39;myName&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">myProvider</span><span class="hl-1"> = </span><span class="hl-6">Mongo</span><span class="hl-1">.</span><span class="hl-6">Factory</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-6">config:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;mongodb://localhost:27017&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">appName:</span><span class="hl-1"> </span><span class="hl-2">&#39;myName&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">useEnvironment:</span><span class="hl-1"> </span><span class="hl-4">false</span><br/><span class="hl-1">});</span><br/><span class="hl-7">// Using `Provider` default values, custom values and `Provider` environment variables:</span><br/><span class="hl-7">// - [x] `Provider` default values</span><br/><span class="hl-7">// - [x] `Provider` environment variables</span><br/><span class="hl-7">// - [x] User custom values</span><br/><span class="hl-7">// - [] Parsing of environment variables</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">myProvider</span><span class="hl-1"> = </span><span class="hl-6">Mongo</span><span class="hl-1">.</span><span class="hl-6">Factory</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-6">config:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;mongodb://localhost:27017&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">appName:</span><span class="hl-1"> </span><span class="hl-2">&#39;myName&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">useEnvironment:</span><span class="hl-1"> </span><span class="hl-4">true</span><br/><span class="hl-1">});</span><br/><span class="hl-7">// Using `Provider` default values, custom values and `Provider` environment variables with a prefix:</span><br/><span class="hl-7">// - [x] `Provider` default values</span><br/><span class="hl-7">// - [] `Provider` environment variables</span><br/><span class="hl-7">// - [x] User custom values</span><br/><span class="hl-7">// - [x] Parsing of environment variables</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">myProvider</span><span class="hl-1"> = </span><span class="hl-6">Mongo</span><span class="hl-1">.</span><span class="hl-6">Factory</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-6">config:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;mongodb://localhost:27017&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">appName:</span><span class="hl-1"> </span><span class="hl-2">&#39;myName&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">useEnvironment:</span><span class="hl-1"> </span><span class="hl-2">&#39;MY_PREFIX_&#39;</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>Now that we have our provider instance, let's see what it offers:</p>
<ul>
<li><strong>Properties</strong>:
<ul>
<li>
<p><code>componentId</code>: a unique identifier for the instance in <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier" target="_blank" class="external">UUID v4</a> format.</p>
</li>
<li>
<p><code>name</code>: the name of the provider, by default, set by the Provider developer or the name provided in the configuration.</p>
</li>
<li>
<p><code>config</code>: the resulting configuration that was used to create the instance.</p>
</li>
<li>
<p><code>state</code>: the current state of the <code>Provider</code>. It is a variable of type <code>ProviderState</code> whose value can be:</p>
<ul>
<li><code>running</code>: indicates that the <code>Provider</code> is in a normal operating state.</li>
<li><code>stopped</code>: indicates that the <code>Provider</code> has been stopped or has not been initialized.</li>
<li><code>error</code>: indicates that the <code>Provider</code> has encountered an error in its operation.</li>
</ul>
</li>
<li>
<p><code>error</code>: in case the <code>Provider</code> is in an error state, this property will contain an object with the error information. This property is of type <code>ProviderError</code>, which is a type alias for <code>Crash | Multi | undefined</code>, you can find more information about <code>Crash</code> and <code>Multi</code> types in the documentation of <a href="https://www.npmjs.com/package/@mdf.js/crash" target="_blank" class="external"><strong>@mdf.js/crash</strong></a>.</p>
</li>
<li>
<p><code>date</code>: the date in ISO 8601 format of the last update of the <code>Provider</code>'s state.</p>
</li>
<li>
<p><code>checks</code>: list of checks performed by the <code>Provider</code> to determine its state. It is a list of objects of type <code>Health.Checks</code>, which will contain at least one entry with the information of the state check of the <code>Provider</code> under the property <code>[${name}:status]</code> where <code>${name}</code> is the name of the <code>Provider</code>, indicated in the configuration or by default. This field will contain an array with a single object of type <code>Health.Check</code> that will contain the information of the state check of the <code>Provider</code>. Example value of checks:</p>
<pre><code class="ts"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;myName:status&quot;</span><span class="hl-1">: [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-2">&quot;status&quot;</span><span class="hl-6">:</span><span class="hl-1"> </span><span class="hl-2">&quot;pass&quot;</span><span class="hl-1">, </span><span class="hl-7">// &quot;pass&quot; | &quot;fail&quot; | &quot;warn&quot;</span><br/><span class="hl-1">      </span><span class="hl-2">&quot;componentId&quot;</span><span class="hl-6">:</span><span class="hl-1"> </span><span class="hl-2">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="hl-1">, </span><span class="hl-7">// UUID v4</span><br/><span class="hl-1">      </span><span class="hl-2">&quot;componentType&quot;</span><span class="hl-6">:</span><span class="hl-1"> </span><span class="hl-2">&quot;connection&quot;</span><span class="hl-1">, </span><span class="hl-7">// or any other type indicated by the `Provider` developer</span><br/><span class="hl-1">      </span><span class="hl-2">&quot;observedValue&quot;</span><span class="hl-6">:</span><span class="hl-1"> </span><span class="hl-2">&quot;running&quot;</span><span class="hl-1">, </span><span class="hl-7">// &quot;running&quot; | &quot;stopped&quot; | &quot;error&quot;</span><br/><span class="hl-1">      </span><span class="hl-2">&quot;time&quot;</span><span class="hl-6">:</span><span class="hl-1"> </span><span class="hl-2">&quot;2024-10-10T10:10:10.000Z&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">&quot;output&quot;</span><span class="hl-6">:</span><span class="hl-1"> </span><span class="hl-4">undefined</span><span class="hl-1">, </span><span class="hl-7">// or the information of the error property</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>The <code>Provider</code> developer can add more checks to the list of <code>checks</code> to provide more information about the state of the <code>Provider</code> or the resources it manages.</p>
</li>
<li>
<p><code>client</code>: instance of the client/resource wrapped by the <code>Provider</code> that has been created with the provided configuration.</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>Note</strong>: the instance returned by the <code>create</code> method is an instance of <code>Provider</code> with generic types for the <code>config</code> (<code>PortConfig</code>) and <code>client</code> (<code>PortClient</code>) properties, which should be extended by the Provider developer to provide a better usage experience, so that the user can know both the configuration and the client that is being used, as well as the client that has been wrapped.</p>
</blockquote>
<ul>
<li><strong>Methods</strong>:
<ul>
<li><code>async start(): Promise&lt;void&gt;</code>: starts the <code>Provider</code> and the resource it wraps.</li>
<li><code>async stop(): Promise&lt;void&gt;</code>: stops the <code>Provider</code> and the resource it wraps.</li>
<li><code>async fail(error: Crash | Error): Promise&lt;void&gt;</code>: sets the <code>Provider</code> in an error state and saves the error information.</li>
</ul>
</li>
<li><strong>Events</strong>:
<ul>
<li><code>on('error', listener: (error: Crash | Error) =&gt; void): this</code>: event emitted every time the <code>Provider</code> emits an error.</li>
<li><code>on('status', listener: (status: Health.Status) =&gt; void): this</code>: event emitted every time the <code>Provider</code> changes its state.</li>
</ul>
</li>
</ul>
<a id="md:i-want-to-instrument-a-provider-with-this-api" class="tsd-anchor"></a><h3 class="tsd-anchor-link">I want to instrument a <code>Provider</code> with this API<a href="#md:i-want-to-instrument-a-provider-with-this-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To instrument a provider with the <strong>@mdf.js/core</strong> <code>Provider</code> API, the following actions must be taken:</p>
<ul>
<li>Use the abstract class <code>Port</code>, provided by the API, which must be extended by the <code>Provider</code> developer.</li>
<li>Define the properties of the <code>PortConfigValidationStruct</code> object, which indicate the default values of the <code>Provider</code>, the values coming from environment variables, and the validation object of type 'Schema' from the <a href="https://www.npmjs.com/package/joi" target="_blank" class="external">Joi</a> module.</li>
<li>Use the <code>ProviderFactoryCreator</code> function to create an instance of the <code>Provider</code>, the class of type <em>Mixin</em> that standardizes the creation of <code>Provider</code> instances with the desired configuration.</li>
</ul>
<p>Let's see point by point how the instrumentation of a <code>Provider</code> is carried out.</p>
<a id="md:1-extendiendo-la-clase-port" class="tsd-anchor"></a><h4 class="tsd-anchor-link"><strong>1. Extendiendo la clase <code>Port</code></strong><a href="#md:1-extendiendo-la-clase-port" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The <code>Port</code> should be extended to implement a new specific Port. This class implements some util logic to facilitate the creation of new Ports, for this reason is exposed as abstract class, instead of an interface. The developer should keep the constructor signature, in order to maintain the compatibility with the <code>ProviderFactoryCreator</code> function.</p>
<p><img src="../media/Provider-Class-Hierarchy.png" alt="class diagram"></p>
<p>The basic operations that already implemented in the class are:</p>
<ul>
<li><strong>Properties</strong>:
<ul>
<li><code>uuid</code>: create by the <code>Port</code> class, it is a unique identifier for the port instance, this uuid is used in error traceability.</li>
<li><code>name</code>: the name of the port, by default, set by the Provider developer or the name provided in the configuration.</li>
<li><code>config</code>: the resulting configuration that was used to create the <code>Port</code> instance.</li>
<li><code>logger</code>: a <code>LoggerInstance</code> object, belonging to the <strong>@mdf.js/logger</strong> module or any other object that implements the <code>LoggerInstance</code> interface. This property is used to log information about the port and the resources it manages. The <code>Port</code> class set the context of the logger to the port <code>name</code> and the <code>uuid</code>, so it's not necessary to include the context and the uuid of the port in the log messages.</li>
<li><code>checks</code>: list of checks performed by the <code>Port</code> by the use of <code>addCheck</code> method, these checks are collected by the <code>Provider</code>, together with the own check of <code>status</code>, and offered to the observability layers.</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>Note</strong>: As the signature of the <code>Port</code> constructor should maintained:</p>
<pre><code class="typescript"><span class="hl-0">constructor</span><span class="hl-1">(</span><span class="hl-6">config</span><span class="hl-1">: </span><span class="hl-6">PortConfig</span><span class="hl-1">, </span><span class="hl-6">logger</span><span class="hl-1">: </span><span class="hl-6">LoggerInstance</span><span class="hl-1">, </span><span class="hl-6">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<p>Your <code>Port</code> class extension will receive the <code>config</code>, <code>logger</code> and <code>name</code> properties, and you should call the <code>super</code> constructor with these properties.</p>
</blockquote>
<p>What the developers of the <code>Provider</code> should develop in their own <code>Port</code> class extension is:</p>
<ul>
<li><code>async start(): Promise&lt;void&gt;</code> method, which is responsible initialize or stablish the connection to the resources.</li>
<li><code>async stop(): Promise&lt;void&gt;</code> method, which is responsible stop services or disconnect from the resources.</li>
<li><code>async close(): Promise&lt;void&gt;</code> method, which is responsible to destroy the services, resources or perform a simple disconnection.</li>
<li><code>state</code> property, a boolean value that indicates if the port is connected (true) or healthy (true) or not (false).</li>
<li><code>client</code> property, that return the <em><strong>PortClient</strong></em> instance that is used to interact with the resources.</li>
</ul>
<p>In the next example you can see the expected behavior of a <code>Port</code> class extension when the <code>start</code>, <code>stop</code> and <code>close</code> methods are called depending on the state of the port:¡.</p>
<p><img src="../media/Provider-States-Methods.png" alt="class diagram"></p>
<p>In the other hand, this class extends the <code>EventEmitter</code> class, so it's possible to emit events to notify the status of the port:</p>
<ul>
<li><code>on('error', listener: (error: Crash) =&gt; void): this</code>: should be emitted to notify errors in the resource management or access, this will not change the provider state, but the error will be registered in the observability layers.</li>
<li><code>on('closed', listener: (error?: Crash) =&gt; void): this</code>: should be emitted if the access to the resources is not longer possible. This event should not be emitted when <code>stop</code> or <code>close</code> methods are used. If the event includes an error, the provider will indicate this error as the cause of the port closure and will be registered in the observability layers.</li>
<li><code>on('unhealthy', listener: (error: Crash) =&gt; void): this</code>: should be emitted when the port has limited access or no access to the resources, but the provider is still running and trying to recover the access. If the event includes an error, the provider will indicate this error as the cause of the port unhealthiness and will be registered in the observability layers.</li>
<li><code>on('healthy', listener: () =&gt; void): this</code>: should be emitted when the port has recovered the access to the resources.</li>
</ul>
<p><img src="../media/Provider-States-Events.png" alt="class diagram"></p>
<p>Check some examples of implementation in:</p>
<ul>
<li><a href="https://www.npmjs.com/package/@mdf.js/elastic-provider" target="_blank" class="external">Elastic provider</a></li>
<li><a href="https://www.npmjs.com/package/@mdf.js/mongo-provider" target="_blank" class="external">Mongo Provider</a></li>
</ul>
<a id="md:2-defining-the-portconfigvalidationstruct-object" class="tsd-anchor"></a><h4 class="tsd-anchor-link"><strong>2. Defining the <code>PortConfigValidationStruct</code> object</strong><a href="#md:2-defining-the-portconfigvalidationstruct-object" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The <code>PortConfigValidationStruct</code> object is a type that defines the default values of the <code>Provider</code>, the values coming from environment variables, and the validation object of type 'Schema' from the <a href="https://www.npmjs.com/package/joi" target="_blank" class="external">Joi</a> module.</p>
<p>The <code>PortConfigValidationStruct</code> object should have the following properties:</p>
<ul>
<li><code>defaultConfig</code>: an object with the default values of the <code>Provider</code>.</li>
<li><code>envBaseConfig</code>: an object with the environment variables that the <code>Provider</code> will use, if any.</li>
<li><code>schema</code>: a Joi schema object that will be used to validate the configuration object passed to the <code>Provider</code>.</li>
</ul>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-6">Joi</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;joi&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">PortConfigValidationStruct</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-6">defaultConfig:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">url:</span><span class="hl-1"> </span><span class="hl-2">&#39;mongodb://localhost:27017&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-6">appName:</span><span class="hl-1"> </span><span class="hl-2">&#39;myName&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">envBaseConfig:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">url:</span><span class="hl-1"> </span><span class="hl-6">process</span><span class="hl-1">.</span><span class="hl-6">env</span><span class="hl-1">[</span><span class="hl-2">&#39;MONGO_URL&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-6">appName:</span><span class="hl-1"> </span><span class="hl-6">process</span><span class="hl-1">.</span><span class="hl-6">env</span><span class="hl-1">[</span><span class="hl-2">&#39;MONGO_APP_NAME&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-6">schema:</span><span class="hl-1"> </span><span class="hl-6">Joi</span><span class="hl-1">.</span><span class="hl-0">object</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-6">url:</span><span class="hl-1"> </span><span class="hl-6">Joi</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">().</span><span class="hl-0">uri</span><span class="hl-1">().</span><span class="hl-0">required</span><span class="hl-1">(),</span><br/><span class="hl-1">    </span><span class="hl-6">appName:</span><span class="hl-1"> </span><span class="hl-6">Joi</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">().</span><span class="hl-0">required</span><span class="hl-1">(),</span><br/><span class="hl-1">  }),</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<a id="md:3-using-the-providerfactorycreator-function" class="tsd-anchor"></a><h4 class="tsd-anchor-link"><strong>3. Using the <code>ProviderFactoryCreator</code> function</strong><a href="#md:3-using-the-providerfactorycreator-function" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>The <code>ProviderFactoryCreator</code> function is a utility function that allows creating instances of the <code>Provider</code> with the desired configuration. This function receives the following arguments:</p>
<ul>
<li><code>port</code>: the class that extends the <code>Port</code> class and implements the specific <code>Provider</code>.</li>
<li><code>validation</code>: the <code>PortConfigValidationStruct</code> object that defines the default values, environment variables, and the validation schema of the <code>Provider</code>.</li>
<li><code>defaultName</code>: the default name of the <code>Provider</code>, so that it will be used if the name is not provided in the configuration.</li>
<li><code>type</code>: the type of the <code>Provider</code>, which will be used to identify the kind of <code>Provider</code> in the observability layers.</li>
</ul>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">Factory</span><span class="hl-1"> = </span><span class="hl-0">ProviderFactoryCreator</span><span class="hl-1">(</span><span class="hl-6">MongoPort</span><span class="hl-1">, </span><span class="hl-6">myConfig</span><span class="hl-1">, </span><span class="hl-2">&#39;Mongo&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;database&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>The <code>Factory</code> object returned by the <code>ProviderFactoryCreator</code> function has a single static method <code>create</code> that allows creating new instances of the <code>Provider</code> with the desired configuration for each case.</p>
<a id="md:small-and-simple-example" class="tsd-anchor"></a><h4 class="tsd-anchor-link"><strong>Small and simple example</strong><a href="#md:small-and-simple-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><a id="md:portts" class="tsd-anchor"></a><h5 class="tsd-anchor-link"><em>port.ts</em><a href="#md:portts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h5><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">Layer</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@mdf.js/core&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">LoggerInstance</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@mdf.js/logger&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">CONFIG_PROVIDER_BASE_NAME</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../config&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">Client</span><span class="hl-1">, </span><span class="hl-6">Config</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./types&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1"> = </span><span class="hl-5">Console</span><span class="hl-1">;</span><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-5">Config</span><span class="hl-1"> = {}</span><br/><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">Port</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">Layer</span><span class="hl-1">.</span><span class="hl-5">Provider</span><span class="hl-1">.</span><span class="hl-5">Port</span><span class="hl-1">&lt;</span><span class="hl-5">Client</span><span class="hl-1">, </span><span class="hl-5">Config</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-7">/** Client handler */</span><br/><span class="hl-1">  </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-6">instance</span><span class="hl-1">: </span><span class="hl-5">Client</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** */</span><br/><span class="hl-1">  </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-6">interval</span><span class="hl-1">: </span><span class="hl-5">NodeJS</span><span class="hl-1">.</span><span class="hl-5">Timeout</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/**</span><br/><span class="hl-7">   * Implementation of functionalities of an HTTP client port instance.</span><br/><span class="hl-7">   * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-6">config</span><span class="hl-7"> - Port configuration options</span><br/><span class="hl-7">   * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-6">logger</span><span class="hl-7"> - Port logger, to be used internally</span><br/><span class="hl-7">   * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-6">name</span><span class="hl-7"> - Port name, to be used in the logger</span><br/><span class="hl-7">   */</span><br/><span class="hl-1">  </span><span class="hl-4">constructor</span><span class="hl-1">(</span><span class="hl-6">config</span><span class="hl-1">: </span><span class="hl-5">Config</span><span class="hl-1">, </span><span class="hl-6">logger</span><span class="hl-1">: </span><span class="hl-5">LoggerInstance</span><span class="hl-1">, </span><span class="hl-6">name</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">super</span><span class="hl-1">(</span><span class="hl-6">config</span><span class="hl-1">, </span><span class="hl-6">logger</span><span class="hl-1">, </span><span class="hl-6">name</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">instance</span><span class="hl-1"> = </span><span class="hl-6">console</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">interval</span><span class="hl-1"> = </span><span class="hl-0">setInterval</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">myCheckFunction</span><span class="hl-1">, </span><span class="hl-9">1000</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">/** Stupid check function */</span><br/><span class="hl-1">  </span><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">readonly</span><span class="hl-1"> </span><span class="hl-0">myCheckFunction</span><span class="hl-1"> = (): </span><span class="hl-5">void</span><span class="hl-1"> </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">// Check the client status</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">addCheck</span><span class="hl-1">(</span><span class="hl-2">&#39;myCheck&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">      </span><span class="hl-6">status:</span><span class="hl-1"> </span><span class="hl-2">&#39;pass&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">componentId:</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">uuid</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">componentType:</span><span class="hl-1"> </span><span class="hl-2">&#39;console&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">observedValue:</span><span class="hl-1"> </span><span class="hl-2">&#39;im stupid&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-6">time:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">().</span><span class="hl-0">toISOString</span><span class="hl-1">(),</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-7">// Emit the status event</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">emit</span><span class="hl-1">(</span><span class="hl-2">&#39;healthy&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">/** Return the underlying port instance */</span><br/><span class="hl-1">  </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">(): </span><span class="hl-5">Client</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">instance</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">/** Return the port state as a boolean value, true if the port is available, false in otherwise */</span><br/><span class="hl-1">  </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-4">get</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">(): </span><span class="hl-5">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">/** Initialize the port instance */</span><br/><span class="hl-1">  </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">start</span><span class="hl-1">(): </span><span class="hl-5">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">void</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-7">// Nothing to do is a stupid port</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">/** Stop the port instance */</span><br/><span class="hl-1">  </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">stop</span><span class="hl-1">(): </span><span class="hl-5">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">void</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-7">// Nothing to do is a stupid port</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">/** Close the port instance */</span><br/><span class="hl-1">  </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">close</span><span class="hl-1">(): </span><span class="hl-5">Promise</span><span class="hl-1">&lt;</span><span class="hl-5">void</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-7">// Nothing to do is a stupid port</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:configts" class="tsd-anchor"></a><h5 class="tsd-anchor-link"><em>config.ts</em><a href="#md:configts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h5><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">Layer</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@mdf.js/core&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">Config</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./port&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-6">Joi</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;joi&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">config</span><span class="hl-1">: </span><span class="hl-5">Layer</span><span class="hl-1">.</span><span class="hl-5">Provider</span><span class="hl-1">.</span><span class="hl-5">PortConfigValidationStruct</span><span class="hl-1">&lt;</span><span class="hl-5">Config</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-6">defaultConfig:</span><span class="hl-1"> {},</span><br/><span class="hl-1">  </span><span class="hl-6">envBaseConfig:</span><span class="hl-1"> {},</span><br/><span class="hl-1">  </span><span class="hl-6">schema:</span><span class="hl-1"> </span><span class="hl-6">Joi</span><span class="hl-1">.</span><span class="hl-0">object</span><span class="hl-1">({}),</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<a id="md:factoryts" class="tsd-anchor"></a><h5 class="tsd-anchor-link"><em>factory.ts</em><a href="#md:factoryts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h5><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">Layer</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@mdf.js/core&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">configEntry</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../config&#39;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">Port</span><span class="hl-1">, </span><span class="hl-6">Client</span><span class="hl-1">, </span><span class="hl-6">Config</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./port&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">Factory</span><span class="hl-1"> = </span><span class="hl-6">Layer</span><span class="hl-1">.</span><span class="hl-6">Provider</span><span class="hl-1">.</span><span class="hl-0">ProviderFactoryCreator</span><span class="hl-1">&lt;</span><span class="hl-5">Client</span><span class="hl-1">, </span><span class="hl-5">Config</span><span class="hl-1">, </span><span class="hl-5">Port</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">  </span><span class="hl-6">Port</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">configEntry</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">`myConsole`</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;console&#39;</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:indexts" class="tsd-anchor"></a><h5 class="tsd-anchor-link"><em>index.ts</em><a href="#md:indexts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h5><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">Factory</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;./factory&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">myProvider</span><span class="hl-1"> = </span><span class="hl-6">Factory</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">();</span><br/><span class="hl-6">myProvider</span><span class="hl-1">.</span><span class="hl-6">instance</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Hello world!&#39;</span><span class="hl-1">);</span><br/><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-6">myProvider</span><span class="hl-1">.</span><span class="hl-6">state</span><span class="hl-1">); </span><span class="hl-7">// true</span><br/><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-6">myProvider</span><span class="hl-1">.</span><span class="hl-6">checks</span><span class="hl-1">); </span><span class="hl-7">// { &quot;myConsole:status&quot;: [{ status: &#39;pass&#39;, ... }], { &quot;myConsole:myCheck&quot;: [{ status: &#39;pass&#39;, ... }] }</span><br/><span class="hl-6">myProvider</span><span class="hl-1">.</span><span class="hl-0">on</span><span class="hl-1">(</span><span class="hl-2">&#39;healthy&#39;</span><span class="hl-1">, () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Im healthy&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:jobs-api" class="tsd-anchor"></a><h2 class="tsd-anchor-link"><strong><em><code>Jobs</code></em> API</strong><a href="#md:jobs-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>Jobs</code> API from <strong>@mdf.js</strong> allows for the management of job requests and executions within an <code>@mdf.js</code> application in a simplified and standardized way. The two main elements of this API are:</p>
<ul>
<li>The <code>JobHandler</code> class, which is responsible for <em>&quot;transporting&quot;</em> the information of the jobs to be executed, as well as notifying the execution thereof through events to interested observers.</li>
<li>The <code>JobRequest</code> interface defines the structure of job requests.</li>
</ul>
<pre><code class="typescript"><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">JobHandler</span><span class="hl-1">&lt;</span><br/><span class="hl-1">    </span><span class="hl-5">Type</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">string</span><span class="hl-1"> = </span><span class="hl-5">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">Data</span><span class="hl-1"> = </span><span class="hl-5">unknown</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">CustomHeaders</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">Record</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-5">any</span><span class="hl-1">&gt; = </span><span class="hl-5">NoMoreHeaders</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">CustomOptions</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">Record</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-5">any</span><span class="hl-1">&gt; = </span><span class="hl-5">NoMoreOptions</span><span class="hl-1">,</span><br/><span class="hl-1">  &gt;;</span><br/><span class="hl-5">interface</span><span class="hl-1"> </span><span class="hl-5">JobRequest</span><span class="hl-1">&lt;</span><br/><span class="hl-1">    </span><span class="hl-5">Type</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">string</span><span class="hl-1"> = </span><span class="hl-5">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">Data</span><span class="hl-1"> = </span><span class="hl-5">unknown</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">CustomHeaders</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">Record</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-5">any</span><span class="hl-1">&gt; = </span><span class="hl-5">NoMoreHeaders</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">CustomOptions</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">Record</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-5">any</span><span class="hl-1">&gt; = </span><span class="hl-5">NoMoreOptions</span><span class="hl-1">,</span><br/><span class="hl-1">  &gt;;</span>
</code><button type="button">Copy</button></pre>

<a id="md:customization-of-generic-types" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Customization of Generic Types<a href="#md:customization-of-generic-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Both the class, <code>JobHandler</code>, and the interface, <code>JobRequest</code> use generic types to define the structure of the data transported in the jobs, as well as to define the custom headers and options that can be added to the jobs. In this way, the <code>Jobs</code> API is flexible and can be used in different contexts and with different types of data. The generic parameters for the <code>JobHandler</code> class and the <code>JobRequest</code> interface are as follows:</p>
<ul>
<li><code>Type</code>: a string type representing the type or types of job to be executed. This string type can be used to filter the jobs to be executed, so that only jobs of a specific type are executed, or to apply different execution logic depending on the job type. For example, it can be used to execute notification jobs: <code>email</code>, <code>sms</code>, <code>push</code>, etc, so the generic type <code>Type</code> would be declared as <code>type Type = 'email' | 'sms' | 'push'</code>.</li>
<li><code>Data</code>: a generic type representing the structure of the data transported in the jobs. This type can be any type of data, from a primitive type like a number or a string, to a complex object with multiple properties. For example, if you want to send an email, the data could be an object with the properties <code>to</code>, <code>subject</code>, and <code>body</code>.</li>
<li><code>CustomHeaders</code>: a generic type representing the custom headers that can be added to the jobs. This type must be a key-value map, where the key is a string and the value can be any type of data. These custom headers can be used to add additional information to the jobs, such as metadata, authentication information, etc. Custom headers are optional and it is not necessary to add them to the jobs if not needed. By default, the generic type <code>CustomHeaders</code> is <code>NoMoreHeaders</code>, which is a type that does not allow adding custom headers to the jobs. An example of a custom header could be an authentication header containing an access token to an external API: <code>{ Authorization: 'Bearer &lt;access token&gt;' }</code>.</li>
<li><code>CustomOptions</code>: a generic type representing the custom options that can be added to the jobs. This type must be a key-value map, where the key is a string and the value can be any type of data. These custom options can be used to add additional information to the jobs, such as specific configurations, execution parameters, etc. Custom options are optional and it is not necessary to add them to the jobs if not needed. By default, the generic type <code>CustomOptions</code> is <code>NoMoreOptions</code>, which is a type that does not allow adding custom options to the jobs. In addition to the custom options, there is the property <code>numberOfHandlers</code>, read the <a href="#md:jobhandler-class">section on the <code>JobHandler</code> class</a> for more information.</li>
</ul>
<p>An example of customizing the generic types of the <code>JobHandler</code> class and the <code>JobRequest</code> interface would be as follows:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-6">Jobs</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@mdf.js/core&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-5">Type</span><span class="hl-1"> = </span><span class="hl-2">&#39;email&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;sms&#39;</span><span class="hl-1"> | </span><span class="hl-2">&#39;push&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-5">Data</span><span class="hl-1"> = { </span><span class="hl-6">to</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">; </span><span class="hl-6">subject</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">; </span><span class="hl-6">body</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1"> };</span><br/><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-5">CustomHeaders</span><span class="hl-1"> = { </span><span class="hl-6">Authorization</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1"> };</span><br/><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-5">CustomOptions</span><span class="hl-1"> = { </span><span class="hl-6">retry</span><span class="hl-1">: </span><span class="hl-5">number</span><span class="hl-1"> };</span><br/><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">type</span><span class="hl-1"> </span><span class="hl-5">MyOwnJobRequest</span><span class="hl-1"> = </span><span class="hl-5">Jobs</span><span class="hl-1">.</span><span class="hl-5">JobRequest</span><span class="hl-1">&lt;</span><span class="hl-5">Type</span><span class="hl-1">, </span><span class="hl-5">Data</span><span class="hl-1">, </span><span class="hl-5">CustomHeaders</span><span class="hl-1">, </span><span class="hl-5">CustomOptions</span><span class="hl-1">&gt;;</span><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">MyOwnJobHandler</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">Jobs</span><span class="hl-1">.</span><span class="hl-5">JobHandler</span><span class="hl-1">&lt;</span><span class="hl-5">Type</span><span class="hl-1">, </span><span class="hl-5">Data</span><span class="hl-1">, </span><span class="hl-5">CustomHeaders</span><span class="hl-1">, </span><span class="hl-5">CustomOptions</span><span class="hl-1">&gt; {}</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">myHandler</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">MyOwnJobHandler</span><span class="hl-1">(</span><span class="hl-2">&#39;multi&#39;</span><span class="hl-1">, { </span><span class="hl-6">to:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">, </span><span class="hl-6">body:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">, </span><span class="hl-6">subject:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1"> }, </span><span class="hl-2">&#39;email&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-6">headers:</span><span class="hl-1"> { </span><span class="hl-6">Authorization:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-6">retry:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">myHandler2</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">MyOwnJobHandler</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-6">data:</span><span class="hl-1"> { </span><span class="hl-6">to:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">, </span><span class="hl-6">body:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1">, </span><span class="hl-6">subject:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">  </span><span class="hl-6">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;email&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">jobUserId:</span><span class="hl-1"> </span><span class="hl-2">&#39;123&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-6">options:</span><span class="hl-1"> { </span><span class="hl-6">headers:</span><span class="hl-1"> { </span><span class="hl-6">Authorization:</span><span class="hl-1"> </span><span class="hl-2">&#39;&#39;</span><span class="hl-1"> }, </span><span class="hl-6">retry:</span><span class="hl-1"> </span><span class="hl-9">0</span><span class="hl-1"> },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:jobhandler-class" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><strong><em><code>JobHandler</code></em> Class</strong><a href="#md:jobhandler-class" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Let's look in more detail at the structure of the <code>JobHandler</code> class:</p>
<ul>
<li>
<p><code>constructor</code>: there are two ways to instantiate a <code>JobHandler</code>:</p>
<ul>
<li><code>constructor(jobRequest: JobRequest&lt;Type, Data, CustomHeaders&gt;)</code>: by using a <code>JobRequest</code> object that contains the information of the job to be executed.</li>
<li><code>constructor(jobUserId: string, data: Data, type?: Type, options?: Options&lt;CustomHeaders&gt;)</code>: by using the necessary parameters to create a <code>JobRequest</code> object.
Ultimately, both cases are equivalent, as the <code>JobRequest</code> object contains the same data as the constructor parameters. Thus, we can analyze the parameters for creation through the <code>JobRequest</code> object:
<ul>
<li><code>type</code>: a string type representing the type of job to be executed. The type of this variable is of the generic type <code>Type</code>, read the section on <a href="#md:customization-of-generic-types">customization of generic types</a> for more information.</li>
<li><code>data</code>: a generic type representing the structure of the data transported in the jobs. The type of this variable is of the generic type <code>Data</code>, read the section on <a href="#md:customization-of-generic-types">customization of generic types</a> for more information.</li>
<li><code>options</code>: this parameter is optional and is used to add custom headers or options to the jobs. The type of this variable is an object containing two properties:
<ul>
<li><code>headers</code>: an object containing the custom headers that will be added to the job. By default, this property is of the type <code>CustomHeaders</code>, read the section on <a href="#md:customization-of-generic-types">customization of generic types</a> for more information.</li>
<li><code>numberOfHandlers</code>: an integer number indicating the number of handlers that will be used to execute the job. By default, this property is <code>1</code>, which means that the job has to be confirmed, through the use of the <code>done</code> method, only once. If a value greater than <code>1</code> is set, the job has to be confirmed <code>n</code> times, where <code>n</code> is the value of <code>numberOfHandlers</code>.</li>
</ul>
</li>
<li><code>jobUserId</code>: an identifier for the job. It should be used to identify the job in the user's logic. When identifying a job, keep in mind the following:
<ul>
<li>Property <code>uuid</code>: each new instance of <code>JobHandler</code> has a unique identifier that can be accessed only in read mode through the property <code>uuid</code>.</li>
<li>Property <code>type</code>: indicates the type of job to be executed.</li>
<li>Property <code>jobUserId</code>: identifier of the job that should be used to identify the job in the user's logic.
That is, we can have several jobs whose <code>jobUserId</code> is <code>alarmNotification</code>, being able to have each one of them a different <code>type</code> or not and being all instances uniquely identifiable by their <code>uuid</code>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Properties</strong>:</p>
<ul>
<li><code>uuid</code>: a unique identifier for the instance of the <code>JobHandler</code>. This identifier is read-only and is generated automatically when creating a new instance of the <code>JobHandler</code>.</li>
<li><code>type</code>: a string type representing the type of job to be executed. This type is of the generic type <code>Type</code>, read the section on <a href="#md:customization-of-generic-types">customization of generic types</a> for more information.</li>
<li><code>jobUserId</code>: an identifier for the job. It should be used to identify the job in the user's logic.</li>
<li><code>jobUserUUID</code>: is a UUID v5 hash that is generated from the <code>jobUserId</code>. This hash is read-only and is generated automatically when creating a new instance of the <code>JobHandler</code>.</li>
<li><code>status</code>: an enumerated type of <code>Status</code> that indicates the status of the job. The possible values are:
<ul>
<li><code>Status.PENDING</code>(<code>pending</code>): indicates that the job is pending execution. It is the initial state of a job.</li>
<li><code>Status.PROCESSING</code>(<code>processing</code>): indicates that the job is being processed.</li>
<li><code>Status.COMPLETED</code>(<code>completed</code>): indicates that the job has been completed successfully.</li>
<li><code>Status.FAILED</code>(<code>failed</code>): indicates that the job has failed.</li>
</ul>
</li>
<li><code>data</code>: a generic type representing the structure of the data transported in the jobs. This type is of the generic type <code>Data</code>. When accessing the property for the first time, i.e., when the status is <code>Status.PENDING</code>, the job changes its status to <code>Status.PROCESSING</code>.</li>
<li><code>options</code>: contains the options indicated in the constructor of the class.</li>
<li><code>createdAt</code>: the creation date of the job as a <code>Date</code> object.</li>
<li><code>hasErrors</code>: a boolean value that indicates if the job contains errors. This value is read-only and is set automatically when an error occurs in the job. These errors are included through the <code>done</code> and <code>addError</code> methods.</li>
<li><code>errors</code>: if there are errors in the job, this property contains a <code>Multi</code> object belonging to the <code>@mdf.js/crash</code> module that contains the information of the errors. This property is read-only and is set automatically when an error occurs in the job. These errors are included through the <code>done</code> and <code>addError</code> methods.</li>
<li><code>processTime</code>: if the job has been completed successfully, this property contains the time it took to process the job in milliseconds, otherwise, the value is <code>-1</code>.</li>
</ul>
</li>
<li>
<p><strong>Methods</strong>:</p>
<ul>
<li>
<p><code>public addError(error: Crash | Multi): void</code>: adds an error to the job. This method is used to add errors to the job that have occurred during its execution. The errors added through this method are included in the <code>errors</code> property and the <code>hasErrors</code> property is set to <code>true</code>. The error created is of the type <code>ValidationError</code>.</p>
</li>
<li>
<p><code>public done(error?: Crash): void</code>: finishes the job. This method is used to finish the job and change its status to <code>Status.COMPLETED</code> if no error has occurred, or to <code>Status.FAILED</code> if an error has occurred. If an error is provided, it is added to the <code>errors</code> property and the <code>hasErrors</code> property is set to <code>true</code>. This method will have to be called as many times as <code>numberOfHandlers</code> has been set in the constructor, once the number of calls is reached, the job will emit the <code>done</code> event.</p>
</li>
<li>
<p><code>public result(): Result&lt;Type&gt;</code>: returns a <code>Result</code> object containing the information of the job.</p>
<pre><code class="typescript"><span class="hl-7">/** Job result interface */</span><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-5">Result</span><span class="hl-1">&lt;</span><span class="hl-5">Type</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">string</span><span class="hl-1"> = </span><span class="hl-5">string</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-7">/** Unique job processing identification */</span><br/><span class="hl-1">  </span><span class="hl-6">uuid</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Job type */</span><br/><span class="hl-1">  </span><span class="hl-6">type</span><span class="hl-1">: </span><span class="hl-5">Type</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Timestamp, in ISO format, of the job creation date */</span><br/><span class="hl-1">  </span><span class="hl-6">createdAt</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Timestamp, in ISO format, of the job resolve date */</span><br/><span class="hl-1">  </span><span class="hl-6">resolvedAt</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Number of entities processed with success in this job */</span><br/><span class="hl-1">  </span><span class="hl-6">quantity</span><span class="hl-1">: </span><span class="hl-5">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Flag that indicate that the publication process has some errors */</span><br/><span class="hl-1">  </span><span class="hl-6">hasErrors</span><span class="hl-1">: </span><span class="hl-5">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Array of errors */</span><br/><span class="hl-1">  </span><span class="hl-6">errors</span><span class="hl-1">?: </span><span class="hl-5">MultiObject</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** User job request identifier, defined by the user */</span><br/><span class="hl-1">  </span><span class="hl-6">jobUserId</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Unique user job request identification, based on jobUserId */</span><br/><span class="hl-1">  </span><span class="hl-6">jobUserUUID</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Job status */</span><br/><span class="hl-1">  </span><span class="hl-6">status</span><span class="hl-1">: </span><span class="hl-5">Status</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</li>
<li>
<p><code>public toObject(): JobObject&lt;Type, Data, CustomHeaders, CustomOptions&gt;</code>: returns a <code>JobObject</code> type object containing the information of the job.</p>
<pre><code class="typescript"><span class="hl-7">/** Job object interface */</span><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-5">JobObject</span><span class="hl-1">&lt;</span><br/><span class="hl-1">  </span><span class="hl-5">Type</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">string</span><span class="hl-1"> = </span><span class="hl-5">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">Data</span><span class="hl-1"> = </span><span class="hl-5">any</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">CustomHeaders</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">Record</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-5">any</span><span class="hl-1">&gt; = </span><span class="hl-5">NoMoreHeaders</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">CustomOptions</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">Record</span><span class="hl-1">&lt;</span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-5">any</span><span class="hl-1">&gt; = </span><span class="hl-5">NoMoreOptions</span><span class="hl-1">,</span><br/><span class="hl-1">&gt; </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">JobRequest</span><span class="hl-1">&lt;</span><span class="hl-5">Type</span><span class="hl-1">, </span><span class="hl-5">Data</span><span class="hl-1">, </span><span class="hl-5">CustomHeaders</span><span class="hl-1">, </span><span class="hl-5">CustomOptions</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-7">/** Job type identification, used to identify specific job handlers to be applied */</span><br/><span class="hl-1">  </span><span class="hl-6">type</span><span class="hl-1">: </span><span class="hl-5">Type</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Unique job processing identification */</span><br/><span class="hl-1">  </span><span class="hl-6">uuid</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Unique user job request identification, generated by UUID V5 standard and based on jobUserId */</span><br/><span class="hl-1">  </span><span class="hl-6">jobUserUUID</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">;</span><br/><span class="hl-1">  ** </span><span class="hl-6">Job</span><span class="hl-1"> </span><span class="hl-6">status</span><span class="hl-1"> */</span><br/><span class="hl-1">  </span><span class="hl-6">status</span><span class="hl-1">: </span><span class="hl-5">Status</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</li>
</ul>
</li>
<li>
<p><strong>Events</strong>:</p>
<ul>
<li><code>on(event: 'done', listener: (uuid: string, result: Result&lt;Type&gt;, error?: Multi) =&gt; void): this</code>: event emitted when the job has been completed successfully or has failed. The event returns the unique identifier of the job, the information of the job in a <code>Result</code> object type, and an error in case a failure has occurred.</li>
</ul>
</li>
</ul>
<a id="md:license" class="tsd-anchor"></a><h2 class="tsd-anchor-link"><strong>License</strong><a href="#md:license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Copyright 2024 Mytra Control S.L. All rights reserved.</p>
<p>Use of this source code is governed by an MIT-style license that can be found in the LICENSE file or at <a href="https://opensource.org/licenses/MIT" target="_blank" class="external">https://opensource.org/licenses/MIT</a>.</p>
</section><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><h3 class="tsd-index-heading uppercase">Index</h3><section class="tsd-index-section"><h3 class="tsd-index-heading">Modules</h3><div class="tsd-index-list"><a href="_mdf_js_core._internal_.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2"></use></svg><span>&lt;internal&gt;</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Namespaces</h3><div class="tsd-index-list"><a href="_mdf_js_core.Health.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-4"></use></svg><span>Health</span></a>
<a href="_mdf_js_core.Jobs.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-4"></use></svg><span>Jobs</span></a>
<a href="_mdf_js_core.Layer.html" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-4"></use></svg><span>Layer</span></a>
</div></section></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:mdfjscore"><span>@mdf.js/core</span></a><ul><li><a href="#md:table-of-contents"><span>Table of contents</span></a></li><li><a href="#md:introduction"><span>Introduction</span></a></li><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:health-interface"><span>Health <wbr/>Interface</span></a></li><li><a href="#md:layerapp-interface"><span>Layer.<wbr/>App <wbr/>Interface</span></a></li><li><a href="#md:layerprovider-api"><span>Layer.<wbr/>Provider API</span></a></li><li><ul><li><a href="#md:i-want-to-use-an-already-instrumented-provider"><span>I <wbr/>Want to <wbr/>Use an <wbr/>Already <wbr/>Instrumented <wbr/>Provider</span></a></li><li><a href="#md:i-want-to-instrument-a-provider-with-this-api"><span>I want to instrument a <wbr/>Provider with this API</span></a></li><li><ul><li><a href="#md:1-extendiendo-la-clase-port"><span>1. <wbr/>Extendiendo la clase <wbr/>Port</span></a></li><li><a href="#md:2-defining-the-portconfigvalidationstruct-object"><span>2. <wbr/>Defining the <wbr/>Port<wbr/>Config<wbr/>Validation<wbr/>Struct object</span></a></li><li><a href="#md:3-using-the-providerfactorycreator-function"><span>3. <wbr/>Using the <wbr/>Provider<wbr/>Factory<wbr/>Creator function</span></a></li><li><a href="#md:small-and-simple-example"><span>Small and simple example</span></a></li><li><ul><li><a href="#md:portts"><span>port.ts</span></a></li><li><a href="#md:configts"><span>config.ts</span></a></li><li><a href="#md:factoryts"><span>factory.ts</span></a></li><li><a href="#md:indexts"><span>index.ts</span></a></li></ul></li></ul></li></ul></li><li><a href="#md:jobs-api"><span>Jobs API</span></a></li><li><ul><li><a href="#md:customization-of-generic-types"><span>Customization of <wbr/>Generic <wbr/>Types</span></a></li><li><a href="#md:jobhandler-class"><span>Job<wbr/>Handler <wbr/>Class</span></a></li></ul></li><li><a href="#md:license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>@mdf.js</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer></footer><div class="overlay"></div></body></html>
